cmake_minimum_required(VERSION 3.12)

project(red_belt)

set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/build)
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/build)
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

macro(define_testapp testapp src_list)
    set(${testapp}_DIR ${testapp})
    set(${testapp}_SRC "")
    foreach(src ${src_list})
        list(APPEND ${testapp}_SRC ${${testapp}_DIR}/${src})
    endforeach()
	add_executable(${testapp}_test ${${testapp}_SRC})
endmacro()

define_testapp(macro_LOG "log_main.cpp")
define_testapp(SORT_BY "sort_by_main.cpp")
define_testapp(UPDATE_FIELD "update_field_main.cpp")
define_testapp(bad_macro "bad_macro_main.cpp")
define_testapp(UNIQ_ID "uniq_id_main.cpp")
define_testapp(table "table_main.cpp")
define_testapp(deque_via_two_vectors "deque_via_two_vectors_main.cpp")
define_testapp(paginator "paginator_main.cpp")
define_testapp(sort_students "sort_students_main.cpp")
define_testapp(learner "learner_main.cpp")
define_testapp(expresses "expresses_main.cpp")
define_testapp(ebook "ebook.cpp")