cmake_minimum_required(VERSION 3.12)

project(red_belt)

set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/build)
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/build)
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

macro(define_testapp testapp src_list)
    set(${testapp}_DIR ${testapp})
    set(${testapp}_SRC "")
    foreach(src ${src_list})
        list(APPEND ${testapp}_SRC ${${testapp}_DIR}/${src})
    endforeach()
	add_executable(${testapp}_test ${${testapp}_SRC})
endmacro()

define_testapp(macro_LOG "log_main.cpp")
define_testapp(SORT_BY "sort_by_main.cpp")
define_testapp(UPDATE_FIELD "update_field_main.cpp")
define_testapp(bad_macro "bad_macro_main.cpp")
define_testapp(UNIQ_ID "uniq_id_main.cpp")
define_testapp(table "table_main.cpp")
define_testapp(deque_via_two_vectors "deque_via_two_vectors_main.cpp")
define_testapp(paginator "paginator_main.cpp")
define_testapp(sort_students "sort_students_main.cpp")
define_testapp(learner "learner_main.cpp")
define_testapp(expresses "expresses_main.cpp")
define_testapp(ebook "ebook.cpp")
define_testapp(booking "booking.cpp")
define_testapp(object_pool "object_pool_main.cpp")
define_testapp(swap_sort_copy "swap_sort_copy_main.cpp")
define_testapp(simple_vector "simple_vector.cpp")
define_testapp(linked_list "linked_list_main.cpp")
define_testapp(athlets "athlets.cpp")
define_testapp(stack_vector "stack_vector.cpp")
define_testapp(translator "translator_main.cpp")
define_testapp(airport_counter "airport_counter_main.cpp")
define_testapp(text_editor "text_editor.cpp")
define_testapp(server_stats "server_stats.cpp;stats.cpp")
define_testapp(permutation "permutation_main.cpp")
define_testapp(group_heavy_strings "group_heavy_strings_main.cpp")
define_testapp(split_into_sentences "split_into_sentences_main.cpp")
define_testapp(merge_sort_3 "merge_sort_3_main.cpp")
define_testapp(priority_collection "priority_collection_main.cpp")